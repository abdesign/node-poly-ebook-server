<!DOCTYPE html><html><head>
    <title>Ebooks</title>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1,user-scalable=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">

    <script src="bower_components/webcomponentsjs/webcomponents-lite.js"></script>

    <link rel="import" href="bower_components/polymer/polymer.html">

    <link rel="import" href="bower_components/app-layout/app-header/app-header.html">
    <link rel="import" href="bower_components/app-layout/app-toolbar/app-toolbar.html">
    <link rel="import" href="bower_components/app-layout/app-scroll-effects/effects/waterfall.html">
    <link rel="import" href="bower_components/app-layout/app-scroll-effects/app-scroll-effects.html">

    <link rel="import" href="bower_components/iron-flex-layout/iron-flex-layout.html">
    <link rel="import" href="bower_components/iron-ajax/iron-ajax.html">
    <link rel="import" href="bower_components/iron-image/iron-image.html">
    <link rel="import" href="bower_components/iron-icon/iron-icon.html">
    <link rel="import" href="bower_components/iron-icons/iron-icons.html">
    <link rel="import" href="bower_components/iron-scroll-threshold/iron-scroll-threshold.html">
    <link rel="import" href="bower_components/iron-ajax/iron-ajax.html">
    <link rel="import" href="bower_components/iron-list/iron-list.html">

    <link rel="import" href="bower_components/paper-styles/color.html">
    <link rel="import" href="bower_components/paper-tabs/paper-tab.html">
    <link rel="import" href="bower_components/paper-tabs/paper-tabs.html">
    <link rel="import" href="bower_components/paper-input/paper-input.html">
    <link rel="import" href="bower_components/paper-item/paper-item.html">
    <link rel="import" href="bower_components/paper-icon-button/paper-icon-button.html">
    <link rel="import" href="bower_components/paper-listbox/paper-listbox.html">
    <link rel="import" href="bower_components/paper-dropdown-menu/paper-dropdown-menu.html">

    <style include="iron-flex iron-flex-alignment"></style>
    <style>body{margin:0;background-color:#3f4f63;color:#99a6b9;font-family:'Roboto', 'Noto', sans-serif;}</style>
    <link rel="shortcut icon" href="img/favicon.ico">
</head>
<body unresolved="" class="fullbleed layout vertical">

<dom-module id="x-grid">
    <template>

        <style is="custom-style">:root{--ebooks-green:#00ca8b;--ebooks-red:#fd5d57;--ebooks-yellow:#ffc92a;--primary-text-color:#c6d9f1;--paper-input-container-label:{color:var(--primary-text-color);};--paper-listbox-background-color:#262f3a;--paper-toolbar-background:rgb(43, 54, 67);--paper-toolbar-color:var(--primary-text-color);--paper-input-container-color:#99a6b9;--paper-input-container-focus-color:#408ff9;--paper-input-container-invalid-color:var(--ebooks-red);--paper-input-container-input-color:var(--primary-text-color);--paper-tabs-selection-bar-color:var(--ebooks-yellow);--photo-content-detail :{background:rgba(63, 79, 99, 0.85);};--thumb-link-color:#fff;}:host{display:block;@apply (--paper-font-common-base);}paper-dropdown-menu{margin-left:40px;margin-right:40px;}app-header{position:fixed;top:0;left:0;right:0;z-index:1;background-color:var(--paper-toolbar-background);color:var(--primary-text-color);--app-header-background-front-layer:{background:var(--paper-toolbar-background);};}paper-tabs{margin-right:40px;}span.green{color:var(--ebooks-green);}span.yellow{color:var(--ebooks-yellow);}span.red{color:var(--ebooks-red);}iron-list{margin-top:80px;padding-bottom:20px;}.thumbContent{@apply (--layout);background-color:var(--paper-toolbar-background);position:relative;margin:0px;}.thumbContent:hover .detail{opacity:1;}.thumbContent > iron-image{@apply (--layout-flex);}.thumbContent > .detail{@apply (--photo-content-detail);position:absolute;bottom:0;left:0;right:0;font-size:18px;font-weight:bold;padding:0;opacity:0;transition:opacity 0.1s;}.thumbContent > .detail > a{color:var(--thumb-link-color);cursor:pointer;text-decoration:inherit;}.self-end{@apply (--layout-self-end);}</style>

        <iron-ajax auto="" url="../init.json" handle-as="json" last-response="{{options}}"></iron-ajax>
        <iron-ajax auto="" url="{{_getLoadFilesUrl(options.sectionIndex)}}" handle-as="json" last-response="{{files}}"></iron-ajax>


        <app-header condenses="" fixed="" effects="blend-background waterfall">
            <app-toolbar>

                <h4 title="">[[options.title]] (<span class$="{{counterclass}}"><span hidden$="{{ishidden}}">{{filteredFiles.length}} / </span>{{files.length}}</span>)</h4>

                <paper-tabs id="sectionTabs" selected="{{options.sectionIndex}}" class="bottom self-end">
                    <template is="dom-repeat" items="{{options.sections}}">
                        <paper-tab>{{item.label}}</paper-tab>
                    </template>
                </paper-tabs>

                <paper-input label="Search" value="{{searchText::input}}">
                    <iron-icon icon="search" prefix=""></iron-icon>
                    <iron-icon suffix="" hidden$="{{!searchText}}" on-tap="clearInput" icon="clear" alt="clear" title="clear"></iron-icon>
                </paper-input>

                <paper-dropdown-menu label="Thumb Sizes">
                    <paper-listbox class="dropdown-content" selected="{{thumbDimsIndex}}">
                        <template is="dom-repeat" items="{{thumbDims}}">
                            <paper-item>{{item.width}} x {{item.height}}</paper-item>
                        </template>
                    </paper-listbox>
                </paper-dropdown-menu>

                <paper-icon-button hidden$="{{isFullScreen()}}" icon="fullscreen" on-tap="toggleFullScreen"></paper-icon-button>
                <paper-icon-button hidden$="{{!isFullScreen()}}" icon="fullscreen-exit" on-tap="toggleFullScreen"></paper-icon-button>
            </app-toolbar>
        </app-header>

        <iron-list items="{{filteredFiles}}" as="file" scroll-target="document" grid="">
            <template>
                <div class="thumbContainer">
                    <div class="thumbContent" style$="{{thumbCss}}" tabindex$="[[tabIndex]]" title="{{index}}) [[_computeTitle(file)]]">
                        <iron-image sizing="cover" src="[[_computeImgUrl(file)]]"></iron-image>

                        <div class="detail">&nbsp;<a href="[[file]]" target="_blank"><iron-icon icon="cloud-download"></iron-icon> Download</a></div>
                    </div>
                </div>
            </template>
        </iron-list>

    </template>

    <script>HTMLImports.whenReady(function(){Polymer({is:"x-grid",properties:{options:Object,files:Array,filteredFiles:{type:Array,value:[]},thumbDims:Array,thumbDimsIndex:Number,thumbCss:String,counterclass:{type:String,value:"green"},searchText:{type:String,value:""},ishidden:{type:Boolean,value:!0},listEle:HTMLElement},observers:["_filterFiles(files, searchText)","_resetBySectionIndex(options.sectionIndex)","_resetByThumbDimsIndex(thumbDimsIndex)"],clearInput:function(){this.searchText=""},isFullScreen:function(){return!!(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement)},toggleFullScreen:function(){if(this.isFullScreen())document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen();else{var e=document.documentElement;e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}},_resetByThumbDimsIndex:function(e){this.thumbCss=["width:",this.thumbDims[this.thumbDimsIndex].width,"px;","height:",this.thumbDims[this.thumbDimsIndex].height,"px;"].join(""),document.querySelector("iron-list").fire("iron-resize")},_resetBySectionIndex:function(e){this.searchText=this.options.sections[e].initialFilter,this.thumbDims=this.options.sections[e].thumbsDims,this.thumbDimsIndex=this.options.sections[e].dimIndex,this._resetByThumbDimsIndex(this.thumbDimsIndex)},_filterFiles:function(e,t){var n,i,s=function(e){for(var t=0;t<i.length;t++){var n=i[t];if(n&&n.length>0){var s=n.substr(0,1);if("!"===s||"-"===s){if(n.length>1&&e.toLowerCase().indexOf(n.substr(1))>-1)return!1}else if(-1===e.toLowerCase().indexOf(n))return!1}}return!0};e||(n=null),n||t||(n=e),n||(i=t.toLowerCase().split(" "),n=e.filter(s)),this.filteredFiles=n,this.ishidden=this.filteredFiles.length===this.files.length,this.counterclass=0===this.filteredFiles.length?"red":this.ishidden?"green":"yellow",document.querySelector("iron-list").fire("iron-resize")},_getLoadFilesUrl:function(e){return void 0==e?null:"/"+e+"/files.json"},_computeTitle:function(e){return e.substring(1+e.lastIndexOf("/"))},_computeImgUrl:function(e){var t=e.replace("file/","img/");return t=t.substr(0,t.lastIndexOf("."))+".jpg"},attached:function(){console.info("attached...")},ready:function(){console.info("ready...")}})});</script>
</dom-module>


<x-grid></x-grid>



</body></html>